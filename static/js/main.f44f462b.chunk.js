(this.webpackJsonpstreamlab=this.webpackJsonpstreamlab||[]).push([[0],{143:function(e,t,a){e.exports=a.p+"static/media/replay-logo.db4d89bd.svg"},149:function(e,t,a){e.exports=a.p+"static/media/streamlab-logo.6081168a.svg"},160:function(e,t,a){e.exports=a(263)},165:function(e,t,a){},259:function(e,t,a){},263:function(e,t,a){"use strict";a.r(t);var r,n=a(0),o=a.n(n),l=a(46),i=a.n(l),c=(a(165),a(24)),s=a(17),u=a(288),m=a(70),d=a(6),f=a(22),p=a(276),h=a(73),y=a(277),E=a(84),b=a(278),g=a(44),v=a(2),O=a(50),R=a(283),C=a(282),S=a(271),D=a(272),j=a(273),A=a(32),T=a(269);!function(e){e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6"}(r||(r={}));var x,L,P,I,k,w,N,_,M=function(e){var t=e.level,a=e.children,n=Object(A.a)(e,["level","children"]);return o.a.createElement(T.a,Object.assign({as:t},function(e){switch(e){case r.H1:return{size:"md",my:1,mx:4,px:1};case r.H2:return{size:"sm",m:0,p:1,textAlign:"left"};case r.H3:return{size:"md",my:4};case r.H4:return{size:"sm",my:4};case r.H6:return{size:"sm",fontWeight:"normal",justifySelf:"center"};default:return{size:"sm"}}}(t),n),a)},H=a(20),F=a(57);!function(e){e[e.AUTO=0]="AUTO"}(I||(I={})),function(e){e[e.DASH=1]="DASH",e[e.HLS=2]="HLS",e[e.PROGRESSIVE=3]="PROGRESSIVE",e[e.MSS=4]="MSS"}(k||(k={})),function(e){e[e.WIDEVINE=1]="WIDEVINE",e[e.PLAYREADY=2]="PLAYREADY",e[e.FAIRPLAY=3]="FAIRPLAY"}(w||(w={})),function(e){e[e.WEBVTT=1]="WEBVTT",e[e.TTML=2]="TTML",e[e.SRT=3]="SRT"}(N||(N={})),function(e){e[e.NONE=0]="NONE",e[e.ERROR=1]="ERROR",e[e.WARNING=2]="WARNING",e[e.INFO=3]="INFO",e[e.DEBUG=4]="DEBUG",e[e.VERBOSE=5]="VERBOSE"}(_||(_={}));var U=_.WARNING,Y=(x={},Object(H.a)(x,k.DASH,"application/dash+xml"),Object(H.a)(x,k.HLS,"application/x-mpegurl"),Object(H.a)(x,k.PROGRESSIVE,"video/mp4"),Object(H.a)(x,k.MSS,"application/vnd.ms-sstr+xml"),x),G=Object.entries(Y).map((function(e){return e.reverse()})).reduce((function(e,t){var a=Object(f.a)(t,2),r=a[0],n=a[1];return e[r]=Number(n),e}),{}),W=(L={},Object(H.a)(L,w.WIDEVINE,"com.widevine.alpha"),Object(H.a)(L,w.PLAYREADY,"com.microsoft.playready"),Object(H.a)(L,w.FAIRPLAY,"com.apple.fps.1_0"),L),V=(P={},Object(H.a)(P,N.WEBVTT,"text/vtt"),Object(H.a)(P,N.TTML,"application/ttml+xml"),Object(H.a)(P,N.SRT,"text/srt"),P),B=[{key:I.AUTO,label:"Auto"},{key:k.DASH,label:"MPEG-DASH"},{key:k.HLS,label:"HLS"},{key:k.MSS,label:"Smooth stream"},{key:k.PROGRESSIVE,label:"Progressive video"}],z=[{key:w.WIDEVINE,label:"Widevine"},{key:w.PLAYREADY,label:"PlayReady"},{key:w.FAIRPLAY,label:"FairPlay"}],q=[{key:I.AUTO,label:"Auto"},{key:N.WEBVTT,label:"WebVTT"},{key:N.TTML,label:"TTML (DXFP)"}],J=function(e){return F.streamTypes.find((function(t){var a=t.urlMatch,r=t.urlNotMatch;return r?a.test(e)&&!r.test(e):a.test(e)}))},K=function(e){var t=J(e);if(t)return G[t.contentTypes[0]]},X=function(e){return/\.vtt/.test(e)?N.WEBVTT:/(\.ttml|\.dxfp|\.xml)/.test(e)?N.TTML:/\.srt/.test(e)?N.SRT:void 0},Z=function(e,t){return(t.find((function(t){return t.key===e}))||t[0]||{label:""}).label},$=function(e){var t=e.streamResource,a=e.drmLicenseResource,r=e.drmCertificateResource,n=e.subtitlesResource,o=e.startOffset,l=t.url,i=""===o?void 0:o;if(l){var c=t.technology===I.AUTO?function(e){if(e)return e.contentTypes[0]}(J(l)):Y[t.technology];if(c){var s={streamUrl:l,contentType:c,startPosition:i};if(a){var u=a.url;if(u){if(s.licenseUrl=u,s.drmType=a.technology!==I.AUTO?W[a.technology]:void 0,s.licenseAcquisitionDetails={},a&&a.headers.length){var m={};a.headers.forEach((function(e){return m[e.name]=e.value})),s.licenseAcquisitionDetails.licenseRequestHeaders=m}var d=r&&r.url;d&&(a.technology===w.WIDEVINE?s.licenseAcquisitionDetails.widevineServiceCertificateUrl=d:a.technology===w.FAIRPLAY&&(s.licenseAcquisitionDetails.fairPlayCertificateUrl=d))}}if(n){var f=n.url;if(f){var p=n.technology===I.AUTO?X(f):n.technology;if(p){var h=V[p],y=f.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i),E=y&&y[2],b="Subtitles file from ".concat(E);s.textTracks=[{contentType:h,src:f,label:b}]}}}return s}}},Q=function(e){var t=Object.entries(_).find((function(t){var a=Object(f.a)(t,2),r=(a[0],a[1]);return e===r}));return t&&t[0]},ee=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"&";if(e.length>1){var r=e.substr(1).split("&").filter((function(e){return 0!==e.indexOf(t)})).join("&");if(r.length>1)return a+r}return""},te=function(e){try{var t=function(e,t){return e.length&&e.substr(1).split("&").find((function(e){return e.startsWith(t)}))}(e,"s=");if(t){var a=t.substr("s=".length);if(a.length)return JSON.parse(decodeURIComponent(a))}}catch(r){console.error('Bad format/encoding of setup parameter ("'.concat("s=",'").'))}},ae=function(e,t){var a,r=t.origin,n=t.pathname,o=t.search;return"".concat(r).concat(n,"?").concat("s=").concat((a=JSON.stringify(e),encodeURIComponent(a).replace(/%7B/g,"{").replace(/%7D/g,"}").replace(/%2C/g,",").replace(/%3A/g,":").replace(/%5B/g,"[").replace(/%5D/g,"]"))).concat(ee(o,"s="))},re=function(){return window.history.pushState({},document.title,function(e){var t=e.pathname,a=e.search;return t+ee(a,"s=","?")}(document.location))},ne=function(e){return"streamResource"in e?{type:"STREAM_RESOURCE_FIELD_CHANGE",value:e.streamResource}:"drmLicenseResource"in e?{type:"DRM_LICENSE_RESOURCE_FIELD_CHANGE",value:e.drmLicenseResource}:"drmCertificateResource"in e?{type:"DRM_CERTIFICATE_RESOURCE_FIELD_CHANGE",value:e.drmCertificateResource}:"subtitlesResource"in e?{type:"SUBTITLES_RESOURCE_FIELD_CHANGE",value:e.subtitlesResource}:{type:"START_OFFSET_FIELD_CHANGE",value:e.startOffset}},oe=function(e,t){return{type:"APPLY_BROWSER_ENVIRONMENT",value:{supportedDrmTechnologies:function(e){return Object(F.isLegacyMicrosoft)(e)?[w.PLAYREADY]:Object(F.isChromiumEdgeOnWindows)(e)?[w.PLAYREADY,w.WIDEVINE]:Object(F.isSafari)(e)?[w.FAIRPLAY]:[w.WIDEVINE]}(e),urlSetup:te(t)}}},le=a(18),ie=a(156),ce=a(129),se=a(130),ue=a(158),me=a(155),de=a(131),fe=a(270),pe=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var r;return Object(ce.a)(this,a),(r=t.call(this,e)).onDelete=function(e){var t=r.state.isOpen;t[e]=!1,r.setState({isOpen:t})},r.onChange=function(e,t){var a=r.props.headers.slice(0);a[t]=e,r.props.onHeadersChange(a)},r.onAnimationEnd=function(e){if(!r.state.isOpen[e]){var t=r.props.headers.slice(0);t.splice(e,1),r.props.onHeadersChange(t)}},r.renderRow=function(e,t,a){var n=e.name,l=e.value,i=e.id;return o.a.createElement(de.a,{key:i,isOpen:r.state.isOpen[t],onAnimationEnd:function(){return r.onAnimationEnd(t)}},o.a.createElement(m.a,{direction:"row",py:2},o.a.createElement(R.a,{flex:"1 2 auto",placeholder:"Header name",mr:2,value:n,onChange:function(e){return r.onChange({name:e.target.value,value:l,id:i},t)}}),o.a.createElement(R.a,{flex:"2 1 auto",placeholder:"Header value",mr:2,value:l,onChange:function(e){return r.onChange({name:n,value:e.target.value,id:i},t)}}),o.a.createElement(fe.a,{flex:"0","aria-label":"Remove",icon:"delete",onClick:function(){return r.onDelete(t)}})))},r.state={isOpen:[]},r}return Object(se.a)(a,[{key:"componentDidMount",value:function(){this.setState({isOpen:new Array(this.props.headers.length).fill(!0)})}},{key:"componentDidUpdate",value:function(e,t,a){e.headers.length<this.props.headers.length?this.setState({isOpen:[].concat(Object(ie.a)(this.state.isOpen),[!0])}):e.headers.length>this.props.headers.length&&this.setState({isOpen:new Array(this.props.headers.length).fill(!0)})}},{key:"render",value:function(){var e=this.props,t=e.headers,a=void 0===t?[]:t,r=(e.onHeadersChange,Object(A.a)(e,["headers","onHeadersChange"]));return o.a.createElement(d.a,Object.assign({mb:a.length?4:0},r),a.map&&a.map(this.renderRow))}}]),a}(o.a.Component),he=function(e){return z.filter((function(t){var a=t.key;return e.indexOf(a)>=0}))},ye=function(e){e.id;var t=e.url,a=e.label,r=(e.useProxy,e.headers),n=e.technology,l=e.techOptions,i=e.onChange,c=e.isHeadersEnabled;return o.a.createElement(o.a.Fragment,null,o.a.createElement(O.a,{gridColumn:c?1:"1/span 2"},o.a.createElement(R.a,{onChange:function(e){return i({url:e.target.value})},placeholder:a,type:"url",value:t})),c&&o.a.createElement(E.a,{onClick:function(){return i({headers:r.concat({name:"",value:"",id:Date.now()})})}},"Add header"),l.length>1?o.a.createElement(C.d,null,o.a.createElement(C.a,{as:E.a,rightIcon:"chevron-down"},Z(n,l)),o.a.createElement(C.c,null,l.map((function(e,t){var a=e.key,r=e.label;return o.a.createElement(C.b,{key:t,onClick:function(){return i({technology:a})}},r)})))):o.a.createElement(E.a,{isDisabled:!0},Z(n,l)),!1,o.a.createElement(d.a,{gridColumn:"1/span 4"},o.a.createElement(pe,{onHeadersChange:function(e){return i({headers:e})},headers:r})))},Ee=Object(le.b)((function(e){return Object(v.a)({},e.streamDetails)}),(function(e){return{handleResourceFieldChange:function(t){return re(),e(ne(t))}}}))((function(e){var t=e.streamResource,a=e.drmLicenseResource,n=e.drmCertificateResource,l=e.subtitlesResource,i=e.startOffset,c=e.handleResourceFieldChange,s=e.supportedDrmTechnologies,u=void 0===s?[w.WIDEVINE]:s,m=e.isDrmCertificateApplicable;return o.a.createElement("form",null,o.a.createElement(d.a,{display:"grid",gridTemplateColumns:"1fr auto auto",gridAutoRows:"auto",gridGap:2,alignItems:"center"},o.a.createElement(M,{level:r.H6,justifySelf:"left",gridColumn:"1/span 2"},"URLs"),o.a.createElement(M,{level:r.H6},"Technology"),!1,o.a.createElement(ye,Object.assign({id:"stream",label:"Stream URL",techOptions:B,isHeadersEnabled:!1,onChange:function(e){return c({streamResource:e})}},t)),o.a.createElement(ye,Object.assign({label:"DRM license URL",id:"license",techOptions:he(u),isHeadersEnabled:!0,onChange:function(e){return c({drmLicenseResource:e})}},a)),m&&o.a.createElement(ye,Object.assign({id:"certificate",label:"DRM certificate URL",techOptions:he([a.technology]),isHeadersEnabled:!1,onChange:function(e){return c({drmCertificateResource:e})}},n)),o.a.createElement(ye,Object.assign({id:"subtitles",label:"Subtitles URL",techOptions:q,isHeadersEnabled:!1,onChange:function(e){return c({subtitlesResource:e})}},l))),o.a.createElement(O.a,{display:"flex",alignItems:"center",mt:2},o.a.createElement(D.a,{htmlFor:"startOffsetField"},"Start offset:"),o.a.createElement(R.a,{id:"startOffsetField",type:"number",step:.001,value:i,width:24,textAlign:"right",min:0,onChange:function(e){return c({startOffset:""===e.target.value?"":Number(e.target.value)})}}),o.a.createElement(j.a,{mx:2,mb:3},"seconds")))})),be=a(274),ge=a(275),ve=a(136),Oe=(a(178),a(179),a(180),a(181),a(182),a(137)),Re=a.n(Oe);window.jsonlint=Re.a;var Ce,Se=function(e){var t=e.value,a=e.onChange;return o.a.createElement(ve.Controlled,{value:t,options:{mode:"application/json",theme:"default",lineNumbers:!0,tabSize:2,gutters:["CodeMirror-lint-markers"],lint:t&&t.trim()},onBeforeChange:function(e,t,r){return a(r)}})},De=Object(le.b)((function(e){return Object(v.a)({},e.playerOptions)}),(function(e){return{handleLogLevelClick:function(t){return re(),e(function(e){return{type:"SET_LOG_LEVEL",value:e}}(t))},handlePlayerConfigurationChange:function(t){return re(),e(function(e){return{type:"SET_PLAYER_CONFIGURATION",value:e}}(t))},handlePlaybackMonitorToggle:function(t){return re(),e({type:"TOGGLE_PLAYBACK_MONITOR",value:t.target.checked})}}}))((function(e){var t=e.logLevel,a=e.showPlaybackMonitor,r=e.customConfiguration,n=e.handleLogLevelClick,l=e.handlePlaybackMonitorToggle,i=e.handlePlayerConfigurationChange;return o.a.createElement("form",null,o.a.createElement(be.a,{templateColumns:"auto 1fr",gap:4,my:2,alignItems:"center"},o.a.createElement(S.a,{id:"playback-monitor-switch",style:{justifySelf:"end"},isChecked:a,onChange:l},"\xa0"),o.a.createElement(D.a,{htmlFor:"playback-monitor-switch"},"Display playback monitor overlay at startup"),o.a.createElement(C.d,null,o.a.createElement(C.a,{as:E.a,rightIcon:"chevron-down",style:{justifySelf:"end"}},Q(t)),o.a.createElement(C.c,{zIndex:5},Object.entries(_).filter((function(e){var t=Object(f.a)(e,1)[0];return!isNaN(Number(_[t]))})).map((function(e){var t=Object(f.a)(e,2),a=t[0],r=t[1];return o.a.createElement(C.b,{key:r,onClick:function(){return n(Number(r))}},a)})))),o.a.createElement(D.a,null,"Player log level (for messages to the JS console)")),o.a.createElement(h.a,{mt:4,mb:1},"Player configuration overrides according to"," ",o.a.createElement(ge.a,{href:"https://vimond.github.io/replay/#/custom-replay/configuration",isExternal:!0,style:{textDecoration:"underline"}},"Replay documentation"),":"),o.a.createElement(Se,{value:r,onChange:i}))})),je=function(e){return{timestamp:(new Date).toISOString(),name:"",formData:{streamDetails:{streamResource:{url:e.streamResource.url,technology:e.streamResource.technology}}}}},Ae=function(e){e.supportedDrmTechnologies;return Object(A.a)(e,["supportedDrmTechnologies"])},Te=function(e,t){return{timestamp:(new Date).toISOString(),name:"",formData:{streamDetails:Ae(e),playerOptions:t}}},xe=function(e,t){var a=t().streamDetails,r=a.streamResource,n=$({streamResource:r});n&&e({type:"PLAY",value:{source:n,historyEntry:je(a)}})},Le=function(e,t){var a=t(),r=a.streamDetails,n=a.playerOptions,o=$(r),l=function(e){var t=e.logLevel,a=e.showPlaybackMonitor,r=e.customConfiguration.trim(),n={};if(r)try{n=JSON.parse(r)}catch(o){}return n.videoStreamer=n.videoStreamer||{},n.videoStreamer.logLevel=Q(t),n.playbackMonitor=n.playbackMonitor||{},n.playbackMonitor.visibleAtStart=a,n}(n);o&&e({type:"PLAY",value:{source:o,options:l,historyEntry:Te(Object(v.a)(Object(v.a)({},r),{},{startOffset:""}),n)}})},Pe=function(e){return e({type:"STOP"})},Ie=function(e){var t=e.header,a=e.isRequired;return o.a.createElement(p.b,{backgroundColor:"gray.100"},o.a.createElement(M,{level:r.H2,flex:"1"},t,!a&&o.a.createElement(h.a,{as:"em",fontStyle:"normal",color:"gray.500",fontWeight:"normal",ml:"4"}," ","optional")),o.a.createElement(p.c,null))},ke=Object(le.b)((function(e){return{expandedIndices:e.ui.expandedAdvancedAccordionIndices,isPlaying:!!e.player.source,isPlayable:!!e.streamDetails.streamResource.url,isPlayerOptionsModified:e.playerOptions.isModified}}),(function(e){return{handlePlay:function(t){return t.currentTarget.blur(),e(Le)},handleAccordionChange:function(t){return e({type:"ADVANCED_ACCORDION_CHANGE",value:t})},handleClear:function(){return re(),e({type:"CLEAR_FORMS"})},handleStop:function(){return e(Pe)}}}))((function(e){var t=e.expandedIndices,a=e.isPlayerOptionsModified,r=e.isPlaying,n=e.isPlayable,l=e.handlePlay,i=e.handleStop,c=e.handleClear,s=e.handleAccordionChange,u=o.a.useState(),d=Object(f.a)(u,2),h=d[0],v=d[1],O=function(){return v(!1)},R=o.a.useRef();return o.a.createElement(y.a,null,o.a.createElement(p.a,{defaultIndex:t,allowMultiple:!0,onChange:s},o.a.createElement(p.d,null,o.a.createElement(Ie,{header:"Stream details",isRequired:!0}),o.a.createElement(p.e,{ml:2,backgroundColor:"White"},o.a.createElement(Ee,null))),o.a.createElement(p.d,null,o.a.createElement(Ie,{header:"Player options".concat(a?" *":"")}),o.a.createElement(p.e,{ml:2,backgroundColor:"White"},o.a.createElement(De,null)))),o.a.createElement(m.a,{justify:"center",py:4},o.a.createElement(E.a,{variantColor:"green",onClick:l,mx:4,isDisabled:!n},"Play"),o.a.createElement(E.a,{variantColor:"red",onClick:i,isDisabled:!r},"Stop"),o.a.createElement(E.a,{variantColor:"red",variant:"outline",onClick:function(){return v(!0)},mx:4},"Clear all forms"),o.a.createElement(b.a,{isOpen:h,leastDestructiveRef:R,onClose:O},o.a.createElement(g.f,null),o.a.createElement(b.b,null,o.a.createElement(g.e,{fontSize:"lg",fontWeight:"bold"},"Clear forms"),o.a.createElement(g.b,null,"Are you sure you want to empty all form fields? You cannot undo this action afterwards."),o.a.createElement(g.d,null,o.a.createElement(E.a,{ref:R,onClick:O},"Cancel"),o.a.createElement(E.a,{variantColor:"red",onClick:function(){c(),O()},ml:3},"Clear forms"))))))})),we=a(287),Ne=a(285),_e=a(279),Me=a(284),He=a(26),Fe=function(e,t){var a=e.text,r=e.level,n=e.link;return o.a.createElement(_e.a,{key:t},o.a.createElement(Me.a,{status:r,alignItems:"flex-start",style:{overflowX:"auto"}},o.a.createElement(Me.b,null),n?o.a.createElement(o.a.Fragment,null,o.a.createElement(ge.a,{href:n,isExternal:!0},a),o.a.createElement(ge.a,{alignSelf:"center",mx:2,href:n,isExternal:!0},o.a.createElement(He.a,{name:"external-link"}))):a))},Ue=Object(le.b)((function(e){return{messages:e.information.messages,isRightPaneExpanded:e.ui.isRightPaneExpanded}}))((function(e){var t=e.messages,a=e.isRightPaneExpanded;return o.a.createElement(d.a,{height:"100%"},o.a.createElement(_e.b,{styleType:"none"},t.map(Fe)),a&&o.a.createElement(Ne.a,{position:"absolute",bottom:2,right:2},"3.0.0-beta.13"))})),Ye=a(19),Ge=a(286);!function(e){e[e.BOTH=0]="BOTH",e[e.NAMED=1]="NAMED",e[e.UNNAMED=2]="UNNAMED"}(Ce||(Ce={}));var We,Ve=function(e){return e.replace(/T/," ").substr(0,16)},Be=function(e){if(e.name)return e.name;var t=e.formData.streamDetails.streamResource,a=t.url.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i),r=a&&a[2],n=function(e){var t=e.url,a=e.technology;return Z(a===I.AUTO?K(t):a,B)}(t),o=n.indexOf("stream")<0?" stream":"";return"".concat(n).concat(o," on ").concat(r||"[unknown host]")},ze=function(e){var t=e.entry,a=e.isSelected,r=e.handleClick;return o.a.createElement(Ye.a,{as:"li",p:2,cursor:"pointer",backgroundColor:a?"gray.200":void 0,_hover:{backgroundColor:"gray.100"},style:{width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},color:t.name?void 0:"gray.500",onClick:r,title:Ve(t.timestamp)+" "+Be(t)},t.error&&o.a.createElement(Ne.a,{variantColor:"red",mt:"-0.2em",title:"This playback attempt failed with an error: ".concat(t.error.message)},"Err")," ",Be(t)+(t.name?"":", "+Ve(t.timestamp)))},qe=function(e){return!(!e.url&&!e.headers.length)},Je={userSelect:"text",backgroundColor:"#F7FAFC",padding:"0.2rem",border:"none",height:"auto",marginBottom:"0.2rem"},Ke=function(e){var t=e.id,a=e.name,r=e.value;return o.a.createElement(o.a.Fragment,{key:t},o.a.createElement(R.a,{type:"text",value:a,isReadOnly:!0,style:Je}),o.a.createElement(R.a,{type:"text",value:r,isReadOnly:!0,style:Je}))},Xe=function(e){var t=e.label,a=e.resource,r=e.techLabels;return o.a.createElement(o.a.Fragment,null,o.a.createElement(D.a,{justifySelf:"right"},t," URL"),o.a.createElement(R.a,{type:"url",value:a.url,isReadOnly:!0,style:Je}),"useProxy"in a&&a.useProxy&&o.a.createElement(o.a.Fragment,null,o.a.createElement(D.a,{justifySelf:"right"},"Use proxy"),o.a.createElement(Ge.a,{isChecked:!0,isReadOnly:!0})),a.technology!==I.AUTO&&o.a.createElement(o.a.Fragment,null,o.a.createElement(D.a,{justifySelf:"right"},t," technology"),o.a.createElement(R.a,{type:"text",value:Z(a.technology,r),isReadOnly:!0,style:Je})),"headers"in a&&a.headers.some((function(e){var t=e.name,a=e.value;return t||a}))?o.a.createElement(o.a.Fragment,null,o.a.createElement(D.a,{alignSelf:"start",justifySelf:"right"},t," headers"),o.a.createElement(be.a,{templateColumns:"1fr 3fr",gap:2,alignItems:"center"},a.headers.map(Ke))):"")},Ze=Object(le.b)((function(e){return e.history}),(function(e){return{handleEntryClick:function(t){return e({type:"SELECT_HISTORY_ENTRY",value:t})},handleEntryLabelChange:function(t){return e({type:"UPDATE_HISTORY_ENTRY_NAME",value:t.target.value})},handleRestoreEntryClick:function(t){return re(),e({type:"RESTORE_HISTORY_ENTRY",value:t})},handleDeleteEntryClick:function(t){return e({type:"DELETE_HISTORY_ENTRY",value:t})},handleDeleteHistory:function(){return e({type:"DELETE_HISTORY"})}}}))((function(e){var t=e.selectedEntry,a=e.history,n=e.handleEntryClick,l=e.handleRestoreEntryClick,i=e.handleDeleteEntryClick,c=e.handleEntryLabelChange,s=e.handleDeleteHistory,u=o.a.useState(),p=Object(f.a)(u,2),y=p[0],O=p[1],C=function(){return O(!1)},S=o.a.useRef();return o.a.createElement(d.a,{mx:4},o.a.createElement(d.a,null,o.a.createElement(M,{level:r.H4},"Form history"),o.a.createElement(h.a,null,"The form data from each playback attempt is registered in the entries below. Duplicates are listed once with their last playback time. Select for inspection and restoration back into the forms:"),!!a.length&&o.a.createElement(_e.b,{overflowY:"scroll",backgroundColor:"white",minHeight:32,maxHeight:64,my:2,borderWidth:"1px",rounded:"md",borderColor:"gray.400"},a.slice(0).reverse().map((function(e){return o.a.createElement(ze,{key:e.timestamp,entry:e,handleClick:function(){return n(e)},isSelected:!(!t||e.timestamp!==t.timestamp)})})))),t&&o.a.createElement(d.a,{mt:4,p:2,backgroundColor:"gray.200",rounded:"md"},o.a.createElement(be.a,{templateColumns:t.error?"auto auto 1fr":"auto 1fr",gap:4,alignItems:"center",title:t.error?"Unsuccessful playback attempt: ".concat(t.error.message||t.error.code||t.error):void 0},t.error&&o.a.createElement(Ne.a,{variantColor:"red",mt:"-0.2em",title:"This playback attempt failed with an error: ".concat(t.error.message)},"Err"),o.a.createElement(M,{level:r.H4},Ve(t.timestamp)),o.a.createElement(R.a,{type:"text",placeholder:"Enter a name for this entry",value:t.name,onChange:c})),o.a.createElement(h.a,null,"The details below can be reapplied to the form fields by pressing Restore. Note that fields not included in the stored data will be cleared."),o.a.createElement(be.a,{mt:2,templateColumns:"auto 1fr",rowGap:1,columnGap:0,alignItems:"center"},o.a.createElement(Xe,{label:"Stream",resource:t.formData.streamDetails.streamResource,techLabels:B}),"drmLicenseResource"in t.formData.streamDetails&&qe(t.formData.streamDetails.drmLicenseResource)&&o.a.createElement(Xe,{label:"DRM license",resource:Object(v.a)(Object(v.a)({},t.formData.streamDetails.drmLicenseResource),{},{technology:I.AUTO}),techLabels:z}),"drmCertificateResource"in t.formData.streamDetails&&qe(t.formData.streamDetails.drmCertificateResource)&&o.a.createElement(Xe,{label:"DRM certificate",resource:t.formData.streamDetails.drmCertificateResource,techLabels:z}),"subtitlesResource"in t.formData.streamDetails&&qe(t.formData.streamDetails.subtitlesResource)&&o.a.createElement(Xe,{label:"Subtitles",resource:t.formData.streamDetails.subtitlesResource,techLabels:q}),"playerOptions"in t.formData&&t.formData.playerOptions&&t.formData.playerOptions.showPlaybackMonitor&&o.a.createElement(o.a.Fragment,null,o.a.createElement(D.a,{justifySelf:"right"},"Show playback monitor"),o.a.createElement(Ge.a,{isChecked:!0,isReadOnly:!0})),"playerOptions"in t.formData&&t.formData.playerOptions&&t.formData.playerOptions.logLevel!==U&&o.a.createElement(o.a.Fragment,null,o.a.createElement(D.a,{justifySelf:"right"},"Player log level"),o.a.createElement(R.a,{type:"text",value:Q(t.formData.playerOptions.logLevel),isReadOnly:!0,style:Je})),"playerOptions"in t.formData&&t.formData.playerOptions&&t.formData.playerOptions.customConfiguration&&t.formData.playerOptions.customConfiguration.trim()&&o.a.createElement(o.a.Fragment,null,o.a.createElement(D.a,{justifySelf:"right"},"Custom configuration"),o.a.createElement(R.a,{type:"text",value:t.formData.playerOptions.customConfiguration.trim(),isReadOnly:!0,style:Je}))),o.a.createElement(m.a,{justify:"center",pt:4},o.a.createElement(E.a,{m:2,variantColor:"blue",onClick:function(){return l(t)}},"Restore into forms"),o.a.createElement(E.a,{m:2,variantColor:"red",onClick:function(){return i(t)}},"Delete from history"))),!!a.length&&o.a.createElement(m.a,{justify:"center",py:1},o.a.createElement(E.a,{m:2,variantColor:"red",variant:"outline",onClick:function(){return O(!0)}},"Clear history"),o.a.createElement(b.a,{isOpen:y,leastDestructiveRef:S,onClose:C},o.a.createElement(g.f,null),o.a.createElement(b.b,null,o.a.createElement(g.e,{fontSize:"lg",fontWeight:"bold"},"Clear forms"),o.a.createElement(g.b,null,"Are you sure you want to clear all history entries? You cannot undo this action afterwards."),o.a.createElement(g.d,null,o.a.createElement(E.a,{ref:S,onClick:C},"Cancel"),o.a.createElement(E.a,{variantColor:"red",onClick:function(){s(),C()},ml:3},"Clear history"))))))})),$e=a(280),Qe=function(e){if(function(e){var t=e.streamDetails,a=e.playerOptions;return e.ui.advancedMode?a.isModified||[t.streamResource,t.drmLicenseResource,t.drmCertificateResource,t.subtitlesResource].some((function(e){return e.url||e.headers.some((function(e){return e.name||e.value}))||e.useProxy})):!!t.streamResource.url}(e)){if(e.ui.advancedMode){var t=e.streamDetails,a=(t.supportedDrmTechnologies,Object(A.a)(t,["supportedDrmTechnologies"])),r=e.playerOptions;r.isModified;return{streamDetails:a,playerOptions:Object(A.a)(r,["isModified"])}}var n=e.streamDetails.streamResource;n.headers,n.useProxy;return{streamDetails:{streamResource:Object(A.a)(n,["headers","useProxy"])}}}},et=Object(le.b)((function(e){return{shareState:Qe(e)}}))((function(e){var t=e.shareState,a=t?ae(t,document.location):"",n=Object($e.a)(a),l=n.onCopy,i=n.hasCopied;return t?o.a.createElement(d.a,{mx:4},o.a.createElement(M,{level:r.H4},"Share your stream setup"),o.a.createElement(h.a,{userSelect:"none",mb:2},"This Streamlab page, with the"," ","playerOptions"in t?"stream details and player options":"stream specified"," to the left pre-filled and ready to be played, can be shared through the following link:"),o.a.createElement(h.a,{backgroundColor:"white",borderRadius:"md",cursor:"text",p:2,wordBreak:"break-all"},a),o.a.createElement(E.a,{variantColor:"blue",my:4,mx:"auto",display:"block",leftIcon:i?"check":"copy",onClick:l},"Copy to clipboard")):o.a.createElement(d.a,{mx:4},o.a.createElement(M,{level:r.H4},"Share your stream setup"),o.a.createElement(h.a,{userSelect:"none",mb:2},"When you have filled in stream details and/or set some player options, you can share this page with the full setup in a link appearing here."))}));!function(e){e.INFO="info",e.SUCCESS="success",e.WARNING="warning",e.ERROR="error"}(We||(We={}));var tt=Object(le.b)((function(e){return{activeTabIndex:e.ui.rightPaneActiveTabIndex,errorMessageCount:e.information.messages.filter((function(e){return e.level===We.ERROR})).length}}),(function(e){return{handleActiveTabChange:function(t){return e({type:"RIGHT_PANE_TAB_CHANGE",value:t})}}}))((function(e){var t=e.activeTabIndex,a=e.errorMessageCount,r=e.handleActiveTabChange;return o.a.createElement(we.f,{flex:"1 1 auto",display:"flex",flexDirection:"column",alignContent:"stretch",isFitted:!0,backgroundColor:"gray.100",height:"100vh",index:t,onChange:r},o.a.createElement(we.c,{flex:"0 0 auto",backgroundColor:"white"},o.a.createElement(we.a,null,"Info"," ",t>0&&a>0&&o.a.createElement(Ne.a,{ml:2,variantColor:"red",variant:"solid"},a)),o.a.createElement(we.a,null,"History"),o.a.createElement(we.a,null,"Sharing")),o.a.createElement(we.e,{flex:"1 1 auto",overflowY:"auto",outline:"none"},o.a.createElement(we.d,null,o.a.createElement(Ue,null)),o.a.createElement(we.d,null,o.a.createElement(Ze,null)),o.a.createElement(we.d,null,o.a.createElement(et,null))))})),at=[{key:I.AUTO,label:"Autodetect stream technology"},{key:k.DASH,label:"MPEG-DASH"},{key:k.HLS,label:"HLS"},{key:k.PROGRESSIVE,label:"Progressive video"}],rt=Object(le.b)((function(e){return{streamResource:e.streamDetails.streamResource}}),(function(e){return{handleStreamUrlChange:function(t){return re(),e(ne({streamResource:{url:t.target.value}}))},handleStreamTechnologyChange:function(t){return re(),e(ne({streamResource:{technology:t}}))},handlePlay:function(t){return t.currentTarget.blur(),e(xe)},handleFormSubmit:function(t){t.preventDefault(),e(xe)}}}))((function(e){var t,a=e.streamResource,n=e.handleStreamUrlChange,l=e.handleStreamTechnologyChange,i=e.handleFormSubmit,c=e.handlePlay;return o.a.createElement(d.a,{as:"form",my:8,onSubmit:i},o.a.createElement(M,{level:r.H3,fontSize:"md",textAlign:"center"},"Test progressive, HLS, MPEG-DASH, or smooth streams:"),o.a.createElement(O.a,{isRequired:!0,m:4},o.a.createElement(R.a,{placeholder:"Stream URL",type:"url",textAlign:"center",value:a.url,onChange:n})),o.a.createElement(m.a,{justify:"center",mx:4},o.a.createElement(C.d,null,o.a.createElement(C.a,{as:E.a,rightIcon:"chevron-down",flex:"0 0 none",ml:2},(t=a.technology,(at.find((function(e){return e.key===t}))||at[0]).label)),o.a.createElement(C.c,null,at.map((function(e){var t=e.key,a=e.label;return o.a.createElement(C.b,{key:t,onClick:function(){return l(t)}},a)})))),o.a.createElement(E.a,{variantColor:"green",mx:4,onClick:c,isDisabled:!a.url},"Play")))})),nt=a(157),ot=a(142),lt=a(281),it=a(143),ct=a.n(it),st=a(144),ut=a.n(st),mt=a(145),dt=a.n(mt),ft=a(146),pt=a.n(ft),ht=a(147),yt=a.n(ht),Et=a(148),bt=a.n(Et),gt=function(e){return function(e,t,a){switch(e&&"string"!==typeof e&&"contentType"in e?e.contentType:""){case Y[k.DASH]:return o.a.createElement(dt.a,a);case Y[k.MSS]:return o.a.createElement(bt.a,a);case Y[k.HLS]:return function(e){return e.indexOf("Safari")>0&&e.indexOf("Chrome")<0&&e.indexOf("Firefox")<0}(t)?o.a.createElement(pt.a,a):o.a.createElement(yt.a,a);default:return o.a.createElement(ut.a,a)}}(e.source,navigator.userAgent,e)},vt={interactionDetector:{inactivityDelay:-1}},Ot=function(e){window.player||(window.player={}),window.player.state||(window.player.state={});for(var t=0,a=Object.entries(e);t<a.length;t++){var r=Object(f.a)(a[t],2),n=r[0],o=r[1];window.player.state[n]=o}},Rt=function(e){window.player=e,window.player.state={},console.info("Playback methods and playback state is exposed to a global %cplayer %cobject. Expand for details:","font-weight: bold; color: orange;","font-weight: normal; color: inherit"),console.dir(window.player),console.info("Start playing a stream. then type e.g. %cplayer.setPosition(123), %cto seek to 02:03, or %cplayer.state.position %cto get the current playback position.","font-weight: bold; color: orange;","font-weight: normal; color: inherit","font-weight: bold; color: orange;","font-weight: normal; color: inherit")},Ct=Object(le.b)((function(e){return Object(v.a)({},e.player)}),(function(e){return{onError:function(t){return e((a=t,function(e){if(a instanceof Error){if(a.sourceError&&(a.sourceError.loader||a.sourceError.frag&&a.sourceError.frag.loader)){var t=a.sourceError,r=(t.loader,t.context,t.frag,Object(A.a)(t,["loader","context","frag"]));a.sourceError=r,e({type:"PLAYER_ERROR",error:a})}else e({type:"PLAYER_ERROR",error:a});console.error("Playback error: %s",a.message)}else e({type:"PLAYER_ERROR",error:new Error(a)}),console.error("Playback error:",a);console.dir(a)}));var a},onExit:function(){return e(Pe)}}}))((function(e){var t=e.source,a=e.options,r=e.onError,n=e.onExit;return o.a.createElement(d.a,{my:1,p:4,position:"relative"},o.a.createElement(ot.Replay,{source:t,options:t?a:Object(v.a)(Object(v.a)({},a),vt),onError:r,onExit:t?n:void 0,onStreamStateChange:Ot,onPlaybackActionsReady:Rt},o.a.createElement(gt,null)),!t&&o.a.createElement(m.a,{position:"absolute",left:0,right:0,top:0,direction:"column",pt:12,alignItems:"center",opacity:.7},o.a.createElement(h.a,{width:"20%",mt:6},o.a.createElement(ge.a,{href:"https://vimond.github.io/replay/",isExternal:!0},o.a.createElement(lt.a,{src:ct.a,alt:"Replay",width:"8rem",margin:"0 auto"}))),o.a.createElement(h.a,{color:"white",mt:6},"The"," ",o.a.createElement(ge.a,{href:"https://vimond.github.io/replay/",isExternal:!0,style:{textDecoration:"underline"}},"open source")," ","React video player from"," ",o.a.createElement(ge.a,{href:"https://vimond.com",isExternal:!0,style:{textDecoration:"underline"}},"Vimond"),".")))})),St=a(149),Dt=a.n(St),jt=Object(le.b)((function(e){return{advancedMode:e.ui.advancedMode,isRightPaneExpanded:e.ui.isRightPaneExpanded}}),(function(e){return{toggleAdvancedMode:function(t){return re(),e({type:"TOGGLE_ADVANCED_MODE",value:t.target.checked})},toggleRightPane:function(t){return e({type:"TOGGLE_RIGHT_PANE",value:"\u2039"===t.currentTarget.textContent})}}}))((function(e){var t=e.advancedMode,a=e.isRightPaneExpanded,n=e.toggleAdvancedMode,l=e.toggleRightPane;return o.a.createElement(m.a,{direction:"row",align:"center",backgroundColor:"gray.200",flex:"0 0 auto"},o.a.createElement(M,{level:r.H1,flex:"1 1 auto",display:"flex",flexDirection:"row",alignItems:"center"},o.a.createElement(ge.a,{href:"https://github.com/vimond/streamlab",isExternal:!0},o.a.createElement(lt.a,{src:Dt.a,alt:"Streamlab",width:"10rem",opacity:.8}))),o.a.createElement(O.a,{flex:"0",p:2,mt:1,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},o.a.createElement(S.a,{id:"advanced-switch",isChecked:t,onChange:n},"\xa0"),o.a.createElement(D.a,{ml:2,fontSize:"sm",htmlFor:"advanced-switch"},"Advanced")),o.a.createElement(E.a,{size:"xs",flex:"0",ml:4,title:"".concat(a?"Collapse":"Expand"," sidebar"),onClick:l},a?"\u203a":"\u2039"))})),At=(a(258),a(259),function(){return{backgroundColor:"#E2E8F0",width:"4px"}}),Tt=Object(le.b)((function(e){return{advancedMode:e.ui.advancedMode,rightPaneWidth:e.ui.rightPaneWidth,isRightPaneExpanded:e.ui.isRightPaneExpanded}}),(function(e){return{handlePaneResize:function(t){return e({type:"PANE_RESIZE",value:t[1]}),null},initializeFeatureState:function(t,a){e(oe(t,a))}}}))((function(e){var t=e.initializeFeatureState,a=e.advancedMode,r=e.handlePaneResize,l=e.isRightPaneExpanded,i=e.rightPaneWidth,f=void 0===i?33:i;return Object(n.useEffect)((function(){t(navigator.userAgent,document.location.search)}),[t]),o.a.createElement(c.a,null,o.a.createElement(s.a,{value:"light"},o.a.createElement(u.a,null),o.a.createElement(nt.a,{onDragEnd:r,sizes:[100-f,f],direction:"horizontal",cursor:"col-resize",gutterAlign:"end",gutterSize:4,gutterStyle:At,collapsed:l?void 0:1,minSize:l?300:0,style:{display:"flex"}},o.a.createElement(m.a,{height:"100vh",direction:"column"},o.a.createElement(jt,null),o.a.createElement(d.a,{flex:"1 1 auto",overflowY:"auto"},a?o.a.createElement(ke,null):o.a.createElement(rt,null),o.a.createElement(Ct,null))),o.a.createElement(tt,null))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var xt,Lt=a(150),Pt=a(30),It=a(151),kt=a(152),wt=a(83),Nt=a(153),_t=a.n(Nt),Mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{advancedMode:!1,expandedAdvancedAccordionIndices:[0],rightPaneActiveTabIndex:0,isRightPaneExpanded:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APPLY_BROWSER_ENVIRONMENT":if(t.value.urlSetup){var a="playerOptions"in t.value.urlSetup,r=a?[0,1]:e.expandedAdvancedAccordionIndices,n=0,o=!0;return Object(v.a)(Object(v.a)({},e),{},{advancedMode:a,expandedAdvancedAccordionIndices:r,rightPaneActiveTabIndex:n,isRightPaneExpanded:o})}return e;case"TOGGLE_ADVANCED_MODE":return Object(v.a)(Object(v.a)({},e),{},{advancedMode:t.value});case"RESTORE_HISTORY_ENTRY":return"drmLicenseResource"in t.value.formData.streamDetails?Object(v.a)(Object(v.a)({},e),{},{advancedMode:!0}):e;case"PANE_RESIZE":return Object(v.a)(Object(v.a)({},e),{},{rightPaneWidth:t.value});case"TOGGLE_RIGHT_PANE":return Object(v.a)(Object(v.a)({},e),{},{isRightPaneExpanded:t.value});case"ADVANCED_ACCORDION_CHANGE":return Object(v.a)(Object(v.a)({},e),{},{expandedAdvancedAccordionIndices:t.value});case"RIGHT_PANE_TAB_CHANGE":return Object(v.a)(Object(v.a)({},e),{},{rightPaneActiveTabIndex:t.value});default:return e}},Ht=function(){return{url:"",headers:[],useProxy:!1,technology:I.AUTO}},Ft=function(){return{streamResource:Ht(),drmLicenseResource:Ht(),drmCertificateResource:Ht(),subtitlesResource:Ht(),supportedDrmTechnologies:[],isDrmCertificateApplicable:!0,startOffset:""}},Ut=function(e){return e!==w.PLAYREADY},Yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APPLY_BROWSER_ENVIRONMENT":var a=t.value,r=a.supportedDrmTechnologies,n=a.urlSetup,o=r[0],l=Ut(o);if(n){var i=Ft();return Object(v.a)(Object(v.a)(Object(v.a)({},i),{},{isDrmCertificateApplicable:l},n.streamDetails),{},{streamResource:Object(v.a)(Object(v.a)({},i.streamResource),n.streamDetails.streamResource),supportedDrmTechnologies:r})}return Object(v.a)(Object(v.a)({},e),{},{supportedDrmTechnologies:r,isDrmCertificateApplicable:l,drmLicenseResource:Object(v.a)(Object(v.a)({},e.drmLicenseResource),{},{technology:o}),drmCertificateResource:Object(v.a)(Object(v.a)({},e.drmCertificateResource),{},{technology:o})});case"STREAM_RESOURCE_FIELD_CHANGE":return Object(v.a)(Object(v.a)({},e),{},{streamResource:Object(v.a)(Object(v.a)({},e.streamResource),t.value)});case"DRM_LICENSE_RESOURCE_FIELD_CHANGE":var c=Object(v.a)(Object(v.a)({},e),{},{isDrmCertificateApplicable:Ut(t.value.technology),drmLicenseResource:Object(v.a)(Object(v.a)({},e.drmLicenseResource),t.value)});return"technology"in t.value&&t.value.technology?Object(v.a)(Object(v.a)({},c),{},{drmCertificateResource:Object(v.a)(Object(v.a)({},e.drmCertificateResource),{},{technology:t.value.technology})}):c;case"DRM_CERTIFICATE_RESOURCE_FIELD_CHANGE":var s=Object(v.a)(Object(v.a)({},e),{},{isDrmCertificateApplicable:Ut(t.value.technology),drmCertificateResource:Object(v.a)(Object(v.a)({},e.drmCertificateResource),t.value)});return"technology"in t.value&&null!=t.value.technology?Object(v.a)(Object(v.a)({},s),{},{drmLicenseResource:Object(v.a)(Object(v.a)({},e.drmLicenseResource),{},{technology:t.value.technology})}):s;case"SUBTITLES_RESOURCE_FIELD_CHANGE":return Object(v.a)(Object(v.a)({},e),{},{subtitlesResource:Object(v.a)(Object(v.a)({},e.subtitlesResource),t.value)});case"START_OFFSET_FIELD_CHANGE":return Object(v.a)(Object(v.a)({},e),{},{startOffset:t.value});case"RESTORE_HISTORY_ENTRY":var u=Ft(),m=e.supportedDrmTechnologies;return Object(v.a)(Object(v.a)(Object(v.a)({},u),t.value.formData.streamDetails),{},{streamResource:Object(v.a)(Object(v.a)({},u.streamResource),t.value.formData.streamDetails.streamResource),supportedDrmTechnologies:m});case"CLEAR_FORMS":return{isDrmCertificateApplicable:e.isDrmCertificateApplicable,supportedDrmTechnologies:e.supportedDrmTechnologies,streamResource:Ht(),drmLicenseResource:Object(v.a)(Object(v.a)({},Ht()),{},{technology:e.drmLicenseResource.technology}),drmCertificateResource:Object(v.a)(Object(v.a)({},Ht()),{},{technology:e.drmCertificateResource.technology}),subtitlesResource:Ht(),startOffset:""};default:return e}},Gt={source:void 0,options:{interactionDetector:{inactivityDelay:-1}}},Wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PLAY":var a=t.value,r=a.source,n=a.options;return{source:r,options:n};case"STOP":case"CLEAR_FORMS":return Gt;case"PLAYER_ERROR":return Object(v.a)(Object(v.a)({},Gt),{},{error:t.error})}return e},Vt={logLevel:U,showPlaybackMonitor:!1,customConfiguration:"",isModified:!1},Bt=function(e){var t=e.logLevel,a=e.showPlaybackMonitor,r=e.customConfiguration;return t===Vt.logLevel&&a===Vt.showPlaybackMonitor&&r===Vt.customConfiguration},zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APPLY_BROWSER_ENVIRONMENT":return t.value.urlSetup&&"playerOptions"in t.value.urlSetup&&t.value.urlSetup.playerOptions&&Object.keys(t.value.urlSetup.playerOptions).length>=0?Object(v.a)(Object(v.a)(Object(v.a)({},e),t.value.urlSetup.playerOptions),{},{isModified:!Bt(Object(v.a)(Object(v.a)({},e),t.value.urlSetup.playerOptions))}):e;case"SET_LOG_LEVEL":return Object(v.a)(Object(v.a)({},e),{},{logLevel:t.value,isModified:!Bt(Object(v.a)(Object(v.a)({},e),{},{logLevel:t.value}))});case"TOGGLE_PLAYBACK_MONITOR":return Object(v.a)(Object(v.a)({},e),{},{showPlaybackMonitor:t.value,isModified:!Bt(Object(v.a)(Object(v.a)({},e),{},{showPlaybackMonitor:t.value}))});case"SET_PLAYER_CONFIGURATION":return Object(v.a)(Object(v.a)({},e),{},{customConfiguration:t.value,isModified:!Bt(Object(v.a)(Object(v.a)({},e),{},{customConfiguration:t.value}))});case"CLEAR_FORMS":return Vt;case"RESTORE_HISTORY_ENTRY":if("playerOptions"in t.value.formData){var a=t.value.formData.playerOptions;if(a)return Object(v.a)(Object(v.a)({},a),{},{isModified:!Bt(Object(v.a)(Object(v.a)({},a),{},{isModified:!1}))})}default:return e}},qt=function(e){var t=Object(f.a)(e,2),a=(t[0],t[1]);return!(null==a||""===a||Array.isArray(a)&&0===a.length||"number"===typeof a&&Number.isNaN(a))},Jt=function(e,t){var a=Object(f.a)(e,1)[0],r=Object(f.a)(t,1)[0];return a.localeCompare(r,"en-US")},Kt=function(e){return null!=e&&e.constructor==={}.constructor},Xt=function e(t,a){if(t===a)return!0;if(Array.isArray(t)&&Array.isArray(a)){if(t.length===a.length){for(var r=t.length;r--;)if(!e(t[r],a[r]))return!1;return!0}return!1}if(Kt(t)&&Kt(a)){var n=Object.entries(t).filter(qt).sort(Jt),o=Object.entries(a).filter(qt).sort(Jt);if(n.length!==o.length)return!1;for(var l=n.length;l--;)if(n[l][0]!==o[l][0]||!e(n[l][1],o[l][1]))return!1;return!0}return!1},Zt=function(e,t){var a=e.findIndex((function(e){return Xt(e.formData,t.formData)}));if(-1!==a){var r=e[a].name,n=e.slice(0);return n.splice(a,1),n.concat(Object(v.a)(Object(v.a)({},t),{},{name:r}))}return e.concat(t)},$t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{history:[],historyListFilter:Ce.BOTH},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_HISTORY_ENTRY":return e.selectedEntry&&e.selectedEntry.timestamp===t.value.timestamp?Object(v.a)(Object(v.a)({},e),{},{selectedEntry:void 0}):Object(v.a)(Object(v.a)({},e),{},{selectedEntry:t.value});case"UPDATE_HISTORY_ENTRY_NAME":if(e.selectedEntry){var a=e.history.slice(0),r=a.findIndex((function(t){return t.timestamp===(e.selectedEntry&&e.selectedEntry.timestamp)}));return-1!==r&&(a[r]=Object(v.a)(Object(v.a)({},a[r]),{},{name:t.value})),Object(v.a)(Object(v.a)({},e),{},{history:a,selectedEntry:Object(v.a)(Object(v.a)({},e.selectedEntry),{},{name:t.value})})}return e;case"DELETE_HISTORY_ENTRY":var n=e.history.findIndex((function(e){return e.timestamp===t.value.timestamp})),o=e.history.slice(0);return o.splice(n,1),Object(v.a)(Object(v.a)({},e),{},{selectedEntry:void 0,history:o});case"DELETE_HISTORY":return{history:[],historyListFilter:e.historyListFilter};case"SET_HISTORY_LIST_FILTER":return Object(v.a)(Object(v.a)({},e),{},{historyListFilter:t.value});case"PLAY":var l=Zt(e.history,t.value.historyEntry),i=e.selectedEntry&&Xt(e.selectedEntry.formData,t.value.historyEntry.formData)?Object(v.a)(Object(v.a)({},t.value.historyEntry),{},{name:e.selectedEntry.name}):e.selectedEntry;return Object(v.a)(Object(v.a)({},e),{},{history:l,selectedEntry:i});case"PLAYER_ERROR":var c=e.history,s=c.slice(0,c.length-1),u=c[c.length-1];return s.push(Object(v.a)(Object(v.a)({},u),{},{error:t.error})),Object(v.a)(Object(v.a)({},e),{},{history:s});default:return e}},Qt=a(154),ea=function(e,t){return function(a,r,n){return r.type===Qt.REHYDRATE?Object(v.a)(Object(v.a)(Object(v.a)({},n),r.payload),{},{information:{messages:t(e,a,r,Object(v.a)(Object(v.a)({},n),r.payload))}}):Object(v.a)(Object(v.a)({},n),{},{information:{messages:t(e,a,r,n)}})}},ta=(xt={},Object(H.a)(xt,k.DASH,{label:"the Shaka Player library",link:"https://github.com/google/shaka-player"}),Object(H.a)(xt,k.HLS,{label:"the HLS.js library",link:"https://github.com/video-dev/hls.js",safari:{label:"Safari's native HLS support through HTML video element"}}),Object(H.a)(xt,k.MSS,{label:"the RxPlayer library",link:"https://github.com/canalplus/rx-player"}),Object(H.a)(xt,k.PROGRESSIVE,{label:"the browser's HTML video element directly"}),xt),aa=function(e){var t=e.url,a=e.technology;return a===I.AUTO?K(t):a},ra=[{id:"welcome-1",displayCondition:function(e){var t=e.nextState;return""===t.streamDetails.streamResource.url&&0===t.history.history.length},message:{level:We.INFO,text:"Welcome to Streamlab, created by Vimond developers.",link:"https://github.com/vimond/streamlab"}},{id:"share",displayCondition:function(e){var t=e.action;return"APPLY_BROWSER_ENVIRONMENT"===t.type&&!!t.value.urlSetup},message:{level:We.SUCCESS,text:"The shared stream setup found in the URL is now applied to the form to the left. Press Play to try it out."}},{id:"start-basic",displayCondition:function(e){var t=e.nextState;return""===t.streamDetails.streamResource.url&&!t.ui.advancedMode},message:{level:We.INFO,text:"Fill in an URL to the stream you want to test, and press Play. Flip the Advanced switch for more options."}},{id:"start-advanced",displayCondition:function(e){var t=e.nextState;return""===t.streamDetails.streamResource.url&&t.ui.advancedMode},message:{level:We.INFO,text:"Fill in an URL to the stream you want to test. Supplement with DRM information if required, or subtitles file URLs if desired. License requests can have headers added for e.g. authorization."}},{id:"pane-resize",displayCondition:function(e){var t=e.nextState;return t.history.history.length>0&&t.history.history.length<3&&!t.ui.rightPaneWidth},message:{level:We.INFO,text:"This pane can be resized by dragging the gutter to the left. Also note the expand/collapse button next to the Advanced toggle."}},{id:"basic-play",displayCondition:function(e){var t=e.nextState;return t.streamDetails.streamResource.technology!==I.AUTO&&""!==t.streamDetails.streamResource.url&&!t.player.source},message:{level:We.INFO,text:"Press Play to load the specified stream URL in the player."}},{id:"stream-autodetect",displayCondition:function(e){var t=e.nextState;return t.streamDetails.streamResource.technology===I.AUTO&&""!==t.streamDetails.streamResource.url},message:function(e,t){var a=J(e.streamDetails.streamResource.url),r="PLAYER_ERROR"===t.type||e.player.source;return a?{level:We.SUCCESS,text:"Auto detected stream type is ".concat(a.label,". ").concat(r?"":"Press Play to load it into the player.")}:{level:We.ERROR,text:"Unable to detect stream type based on URL content. Please select the technology from the dropdown."}}},{id:"player-lib-support",displayCondition:function(e){var t=e.nextState;return(!("error"in t.player)||!t.player.error)&&""!==t.streamDetails.streamResource.url&&!!aa(t.streamDetails.streamResource)},message:function(e,t){var a=e.streamDetails.streamResource.technology,r=e.streamDetails.supportedDrmTechnologies&&e.streamDetails.supportedDrmTechnologies[0]===w.FAIRPLAY,n=a===I.AUTO?K(e.streamDetails.streamResource.url):a;if(n){var o=r&&n===k.HLS?ta[k.HLS].safari:ta[n];return Object(v.a)({level:We.INFO,text:"The player will use ".concat(o.label," for playing this stream.")},o)}return{level:We.ERROR,text:"Undecided stream technology. Unable to select a playback technology."}}},{id:"limited-smooth-support",displayCondition:function(e){var t=e.nextState;return(!("error"in t.player)||!t.player.error)&&""!==t.streamDetails.streamResource.url&&aa(t.streamDetails.streamResource)===k.MSS},message:{level:We.WARNING,text:"Note that the integration with this library is not complete, and lacks support for subtitles and controls for bitrate + multiple audio tracks."}},{id:"subtitles-autodetect",displayCondition:function(e){var t=e.nextState;return t.streamDetails.subtitlesResource.technology===I.AUTO&&""!==t.streamDetails.subtitlesResource.url},message:function(e,t){var a=X(e.streamDetails.subtitlesResource.url);return a?{level:We.INFO,text:"Auto detected subtitles type is ".concat(Z(a,q),".")}:{level:We.WARNING,text:"Unable to detect subtitles type based on URL content. Please select the technology from the dropdown."}}},{id:"subtitles-incompatible",displayCondition:function(e){var t=e.nextState;return""!==t.streamDetails.subtitlesResource.url&&(t.streamDetails.subtitlesResource.technology===N.TTML||t.streamDetails.subtitlesResource.technology===I.AUTO&&X(t.streamDetails.subtitlesResource.url)===N.TTML)&&aa(t.streamDetails.streamResource)!==k.DASH},message:{level:We.WARNING,text:"The subtitles format, TTML, is only supported for DASH streams through Shaka Player."}},{id:"player-error",displayCondition:function(e){return"error"in e.nextState.player},message:function(e,t){return{level:We.ERROR,text:"Player error: ".concat("error"in e.player&&e.player.error&&e.player.error.message,". The full error object is logged to the browser console.")}}},{id:"monitor",displayCondition:function(e){var t=e.nextState;return!!t.player.source&&!t.playerOptions.showPlaybackMonitor},message:{level:We.INFO,text:"Press Ctrl+Alt+M to reveal a panel with all properties of the playback state."}},{id:"share-incompatible-drm",displayCondition:function(e){var t=e.nextState,a=e.action;return!!("APPLY_BROWSER_ENVIRONMENT"===a.type&&a.value.urlSetup&&"drmLicenseResource"in a.value.urlSetup.streamDetails&&""!==a.value.urlSetup.streamDetails.drmLicenseResource.url&&a.value.urlSetup.streamDetails.drmLicenseResource.technology&&t.streamDetails.supportedDrmTechnologies.indexOf(a.value.urlSetup.streamDetails.drmLicenseResource.technology)<0)},message:{level:We.ERROR,text:"The shared link specified an unsupported DRM technology, and can perhaps not be used for playback in this browser. Consider testing it in a different browser."}},{id:"drm-auto-detect",displayCondition:function(e){return e.nextState.ui.advancedMode},message:function(e,t){return{level:We.INFO,text:"This browser supports ".concat((e.streamDetails.supportedDrmTechnologies||[]).map((function(e){return Z(e,z)})).join(" and ")," for DRM playback.")}}},{id:"drm-fairplay-certificate",displayCondition:function(e){var t=e.nextState;return t.ui.advancedMode&&!!t.streamDetails.drmLicenseResource.url&&!t.streamDetails.drmCertificateResource.url&&t.streamDetails.drmLicenseResource.technology===w.FAIRPLAY},message:{level:We.WARNING,text:"When playing a stream with FairPlay DRM encryption, a certificate URL for the content provider needs to be specified."}},{id:"drm-widevine-certificate",displayCondition:function(e){var t=e.nextState;return t.ui.advancedMode&&!!t.streamDetails.drmLicenseResource.url&&!t.streamDetails.drmCertificateResource.url&&t.streamDetails.drmLicenseResource.technology===w.WIDEVINE},message:{level:We.INFO,text:"When no DRM certificate URL is specified, the Widevine service's certificate will be fetched from the same URL as the DRM license. This will appear in DevTools as two similar requests to the license URL, however the payloads are different."}},{id:"player-options-invalid-json",displayCondition:function(e){var t=e.nextState;if(!(t.ui.advancedMode&&t.playerOptions.customConfiguration&&t.playerOptions.customConfiguration.trim()))return!1;try{return JSON.parse(t.playerOptions.customConfiguration),!1}catch(a){return!0}},message:{level:We.WARNING,text:"The player configuration overrides are not specified as valid JSON, and will be ignored."}}],na=Object(Pt.combineReducers)({ui:Mt,streamDetails:Yt,player:Wt,playerOptions:zt,history:$t,information:function(){return{}}}),oa=ea(ra,(function(e,t,a,r){return e.filter((function(e){return e.displayCondition({action:a,prevState:t,nextState:r})})).map((function(e){return"function"===typeof e.message?e.message(r,a):e.message}))})),la={key:"root",storage:_t.a,blacklist:["player","information"]},ia=Object(wt.a)(la,(function(e,t){return oa(e,t,na(e,t))})),ca=function(){var e=Object(Pt.createStore)(ia,Object(It.composeWithDevTools)(Object(Pt.applyMiddleware)(kt.a)));return{store:e,persistor:Object(wt.b)(e)}}(),sa=ca.store,ua=ca.persistor;i.a.render(o.a.createElement(le.a,{store:sa},o.a.createElement(Lt.a,{persistor:ua},o.a.createElement(Tt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[160,1,2]]]);
//# sourceMappingURL=main.f44f462b.chunk.js.map